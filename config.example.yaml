# WhatThePatch Configuration
# Copy this file to config.yaml and fill in your values

# Active engine - which AI to use for reviews
# Available engines:
#   - "claude-api": Anthropic Claude API (requires API key)
#   - "claude-cli": Claude Code CLI (uses your existing team auth)
#   - "openai-api": OpenAI API (requires API key)
#   - "openai-codex-cli": OpenAI Codex CLI (uses your existing ChatGPT auth)
#   - "gemini-api": Google Gemini API (requires API key)
#   - "gemini-cli": Google Gemini CLI (uses your existing Google auth)
# Future engines: "ollama"
engine: "claude-api"

# Engine-specific configurations
engines:
  # Anthropic Claude API settings
  claude-api:
    api_key: "sk-ant-api03-..."
    model: "claude-sonnet-4-20250514"
    max_tokens: 4096
    # Available models for --switch-model (customize this list as needed)
    # See: https://docs.anthropic.com/en/docs/about-claude/models
    available_models:
      - "claude-sonnet-4-20250514"
      - "claude-opus-4-20250514"
      - "claude-3-5-sonnet-20241022"
      - "claude-3-5-haiku-20241022"

  # Claude Code CLI settings
  claude-cli:
    # Path to claude executable (leave empty to use system PATH)
    path: ""
    # Additional arguments to pass to claude command
    # Example: ["--model", "opus"]
    args: []

  # OpenAI API settings
  openai-api:
    api_key: "sk-..."
    model: "gpt-4o"
    max_tokens: 4096
    # Available models for --switch-model (customize this list as needed)
    # See: https://platform.openai.com/docs/models
    available_models:
      - "gpt-4o"
      - "gpt-4o-mini"
      - "gpt-4-turbo"
      - "o1"
      - "o1-mini"

  # OpenAI Codex CLI settings
  openai-codex-cli:
    # Path to codex executable (leave empty to use system PATH)
    path: ""
    # Model to use (default: gpt-5)
    model: "gpt-5"
    # Optional API key (can also use CODEX_API_KEY env var or ChatGPT sign-in)
    api_key: ""
    # Available models for --switch-model (customize this list as needed)
    available_models:
      - "gpt-5"
      - "gpt-4o"
      - "o1"

  # Google Gemini API settings
  gemini-api:
    api_key: "AIza..."
    model: "gemini-2.0-flash"
    max_tokens: 4096
    # Available models for --switch-model (customize this list as needed)
    # See: https://ai.google.dev/gemini-api/docs/models/gemini
    available_models:
      - "gemini-2.0-flash"
      - "gemini-2.0-flash-thinking-exp"
      - "gemini-1.5-pro"
      - "gemini-1.5-flash"

  # Google Gemini CLI settings
  gemini-cli:
    # Path to gemini executable (leave empty to use system PATH)
    path: ""
    # Model to use (default: gemini-2.0-flash)
    model: "gemini-2.0-flash"
    # Optional API key (can also use GEMINI_API_KEY env var or Google Cloud auth)
    api_key: ""
    # Available models for --switch-model (customize this list as needed)
    available_models:
      - "gemini-2.0-flash"
      - "gemini-2.0-flash-thinking-exp"
      - "gemini-1.5-pro"
      - "gemini-1.5-flash"

  # Ollama local models (future)
  # ollama:
  #   host: "localhost:11434"
  #   model: "llama3"

# Repository access tokens
tokens:
  # GitHub Personal Access Token
  # Create at: https://github.com/settings/tokens
  # Required scopes: repo (for private repos)
  github: "ghp_..."

  # Bitbucket App Password
  # Create at: https://bitbucket.org/account/settings/app-passwords/
  # Required permissions: Repositories (Read)
  bitbucket_username: "your-username"
  bitbucket_app_password: "..."

# Output settings
output:
  # Directory where review files will be saved
  # Supports ~ for home directory
  directory: "~/pr-reviews"

  # Filename pattern. Available variables:
  # {repo} - repository name
  # {pr_number} - PR number
  # {ticket_id} - extracted ticket ID (or "NO-TICKET" if not found)
  # {branch} - source branch name (sanitized)
  # Note: Extension is added automatically based on format setting
  filename_pattern: "{repo}-{pr_number}"

  # Output format: md (markdown), txt (plain text), or html (styled HTML)
  # Can be overridden with --format flag, or changed with --switch-output
  format: "html"

  # Auto-open file after generation
  # Opens in browser for HTML, default text editor for md/txt
  # Can be disabled with --no-open flag
  auto_open: true

# Ticket ID extraction
ticket:
  # Regex pattern to extract ticket ID from branch name
  # Default matches patterns like: ABC-123, JIRA-456, PROJ-789
  # The first capture group is used as the ticket ID
  pattern: "([A-Z]+-\\d+)"

  # Fallback if no ticket ID found
  fallback: "NO-TICKET"
